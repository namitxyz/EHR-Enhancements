<!DOCTYPE html>
<html lang="en" ng-app="ui.bootstrap.demo">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.5.3/angular.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.5.3/angular-animate.js"></script>
    <script src="http://angular-ui.github.io/bootstrap/ui-bootstrap-tpls-1.3.2.js"></script>
    <script src="dropDownEmail.js"></script>
    <link href="http://netdna.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">
    <title>Index | Team Zeus</title>
    <link rel="icon" href="logo.ico">

    <!-- Bootstrap Core CSS -->
    <link href="../bower_components/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- MetisMenu CSS -->
    <link href="../bower_components/metisMenu/dist/metisMenu.min.css" rel="stylesheet">

    <!-- Timeline CSS -->
    <link href="../dist/css/timeline.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="../dist/css/sb-admin-2.css" rel="stylesheet">

    <!-- Morris Charts CSS -->
    <link href="../bower_components/morrisjs/morris.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="../bower_components/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body ng-controller="ModalDemoCtrl">

    <div id="wrapper">

        <!-- Navigation -->
        <nav class="navbar navbar-default navbar-static-top" role="navigation" style="margin-bottom: 0">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="../../index.html">Team ZEUS</a>
            </div>
            <!-- /.navbar-header -->

            <ul class="nav navbar-top-links navbar-right">
                <li class="dropdown">
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                        <i class="fa fa-envelope fa-fw"></i>  <i class="fa fa-caret-down"></i>
                    </a>
                    <ul class="dropdown-menu dropdown-messages">
                        <li>
                            <a href="#">
                                <div>
                                    <strong></strong>
                                    <span class="pull-right text-muted">
                                        <em>Yesterday</em>
                                    </span>
                                </div>
                                <div>I need a prescription refill...</div>
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a href="#">
                                <div>
                                    <strong></strong>
                                    <span class="pull-right text-muted">
                                        <em>Yesterday</em>
                                    </span>
                                </div>
                                <div>I had high blood pressure yesterday, do I need  an appointment?...</div>
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a href="#">
                                <div>
                                    <strong>Elena Robert</strong>
                                    <span class="pull-right text-muted">
                                        <em>Yesterday</em>
                                    </span>
                                </div>
                                <div>Did you receive my test result?...</div>
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a class="text-center" href="#">
                                <strong>Read All Messages</strong>
                                <i class="fa fa-angle-right"></i>
                            </a>
                        </li>
                    </ul>
                    <!-- /.dropdown-messages -->
                </li>
                <!-- /.dropdown -->
                <li class="dropdown">
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                        <i class="fa fa-tasks fa-fw"></i>  <i class="fa fa-caret-down"></i>
                    </a>
                    <ul class="dropdown-menu dropdown-tasks">
                        <li>
                            <a href="#">
                                <div>
                                    <p>
                                        <strong>Next Prescription refill</strong>
                                        <span class="pull-right text-muted">21 more Days</span>
                                    </p>
                                    <div class="progress progress-striped active">
                                        <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width: 40%">
                                            <span class="sr-only">27% Complete (danger)</span>
                                        </div>
                                    </div>
                                </div>
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a href="#">
                                <div>
                                    <p>
                                        <strong>Next Appointment </strong>
                                        <span class="pull-right text-muted">24 more days</span>
                                    </p>
                                    <div class="progress progress-striped active">
                                        <div class="progress-bar progress-bar-info" role="progressbar" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100" style="width: 20%">
                                            <span class="sr-only">20% Complete</span>
                                        </div>
                                    </div>
                                </div>
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a href="#">
                                <div>
                                    <p>
                                        <strong>Daily Exercise  </strong>
                                        <span class="pull-right text-muted">60% Complete</span>
                                    </p>
                                    <div class="progress progress-striped active">
                                        <div class="progress-bar progress-bar-warning" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 60%">
                                            <span class="sr-only">60% Complete (warning)</span>
                                        </div>
                                    </div>
                                </div>
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a href="#">
                                <div>
                                    <p>
                                        <strong>Hours of sleep</strong>
                                        <span class="pull-right text-muted">6 hours</span>
                                    </p>
                                    <div class="progress progress-striped active">
                                        <div class="progress-bar progress-bar-danger" role="progressbar" aria-valuenow="80" aria-valuemin="0" aria-valuemax="100" style="width: 80%">
                                            <span class="sr-only">80% Complete (success)</span>
                                        </div>
                                    </div>
                                </div>
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a class="text-center" href="#">
                                <strong>See All Tasks</strong>
                                <i class="fa fa-angle-right"></i>
                            </a>
                        </li>
                    </ul>
                    <!-- /.dropdown-tasks -->
                </li>
                <!-- /.dropdown -->
                <li class="dropdown">
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                        <i class="fa fa-bell fa-fw"></i>  <i class="fa fa-caret-down"></i>
                    </a>
                    <ul class="dropdown-menu dropdown-alerts">
                        <li>
                            <a href="#">
                                <div>
                                    <i class="fa fa-comment fa-fw"></i> New Message
                                    <span class="pull-right text-muted small">4 minutes ago</span>
                                </div>
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a href="#">
                                <div>
                                    <i class="fa fa-twitter fa-fw"></i> 3 New Test Result
                                    <span class="pull-right text-muted small">12 minutes ago</span>
                                </div>
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a href="#">
                                <div>
                                    <i class="fa fa-envelope fa-fw"></i> Blood pressure alert from Fitbit
                                    <span class="pull-right text-muted small">24 minutes ago</span>
                                </div>
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a href="#">
                                <div>
                                    <i class="fa fa-tasks fa-fw"></i> Outbreak in your area
                                    <span class="pull-right text-muted small">54 minutes ago</span>
                                </div>
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a href="#">
                                <div>
                                    <i class="fa fa-upload fa-fw"></i> Recall items
                                    <span class="pull-right text-muted small">56 minutes ago</span>
                                </div>
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a class="text-center" href="#">
                                <strong>See All Alerts</strong>
                                <i class="fa fa-angle-right"></i>
                            </a>
                        </li>
                    </ul>
                    <!-- /.dropdown-alerts -->
                </li>
                <!-- /.dropdown -->
                <li class="dropdown">
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                        <i class="fa fa-user fa-fw"></i>  <i class="fa fa-caret-down"></i>
                    </a>
                    <ul class="dropdown-menu dropdown-user">
                        <li><a href="register.html"><i class="fa fa-user fa-fw"></i> User Profile</a>
                        </li>
                        <!-- <li><a href="#"><i class="fa fa-gear fa-fw"></i> Settings</a>
                        </li> -->
                        <li class="divider"></li>
                        <li><a href="../../index.html"><i class="fa fa-sign-out fa-fw"></i> Logout</a>
                        </li>
                    </ul>
                    <!-- /.dropdown-user -->
                </li>
                <!-- /.dropdown -->
            </ul>
            <!-- /.navbar-top-links -->
            <div class="navbar-default sidebar" role="navigation">
                <div class="sidebar-nav navbar-collapse">
                    <ul class="nav" id="side-menu">
                        <li>
                            <a href="patientFirstPage.html"><i class="fa fa-dashboard fa-fw"></i> Patient's Dashboard</a>
                        </li>
                        <li>
                            <a href="#"><i class="fa fa-bar-chart-o fa-fw"></i> Observation Detail<span class="fa arrow"></span></a>
                            <ul class="nav ">
                            <li>
                                <a href="tables.html"><i class="fa fa-table fa-fw"></i>Observation Detail</a>
                            </li>
                        </ul>
                            <!-- /.nav-second-level -->
                        </li>
                        <li>
                            <a href="#" ng-click="open('lg')"><i class="fa fa-mail-forward fa-fw" ></i> Send Email</a>
                            <!-- <button type="button" class="btn btn-default" ng-click="open('lg')">Large modal</button> -->
                        </li>
                        <li>
                            <a href="patientP2.html"><i class="fa fa-files-o fa-fw"></i> Personal Health Record</a>
                        </li>
                    </ul>
                </div>
                <!-- /.sidebar-collapse -->
            </div>
            <!-- /.navbar-static-side -->
        </nav>

        <div id="page-wrapper">
            <div class="row">
                <div class="col-lg-12">
                    <h1 class="page-header">Patient's Dashboard</h1>
                </div>
                <!-- /.col-lg-12 -->
            </div>
            <!-- /.row -->
            <div class="row">
                <div class="col-lg-3 col-md-6">
                    <div class="panel panel-primary">
                        <div class="panel-heading">
                            <div class="row">
                                <div class="col-xs-3">
                                    <i class="fa fa-comments fa-5x"></i>
                                </div>
                                <div class="col-xs-9 text-right">
                                    <div class="huge" id= "pcpComments" > "26" </div>
                                    <script>
                                            var i = 21;
                                            $('#pcpComments').text(i);
                                    </script>
                                    <div>PCP Comments!</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6">
                    <div class="panel panel-green">
                        <div class="panel-heading">
                            <div class="row">
                                <div class="col-xs-3">
                                    <i class="fa fa-tasks fa-5x"></i>
                                </div>
                                <div class="col-xs-9 text-right">
                                    <div class="huge">12</div>
                                    <div>Test Result!</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6">
                    <div class="panel panel-yellow">
                        <div class="panel-heading">
                            <div class="row">
                                <div class="col-xs-3">
                                    <i class="fa fa-tencent-weibo fa-5x"></i>
                                </div>
                                <div class="col-xs-9 text-right">
                                    <div class="huge">124</div>
                                    <div>Prescriptions Detail!</div>
                                </div>
                            </div>
                        </div>
                        
                    </div>
                </div>
                <div class="col-lg-3 col-md-6">
                    <div class="panel panel-red">
                        <div class="panel-heading">
                            <div class="row">
                                <div class="col-xs-3">
                                    <i class="fa fa-support fa-5x"></i>
                                </div>
                                <div class="col-xs-9 text-right">
                                    <div class="huge">13</div>
                                    <div>Charts!</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- /.row -->
            <div class="row">
                <div class="col-lg-8">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <i class="fa fa-bar-chart-o fa-fw"></i> Patient Data
                            <div class="pull-right">
                                <div class="btn-group">
                                    <button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown">
                                        Actions
                                        <span class="caret"></span>
                                    </button>
                                    <ul class="dropdown-menu pull-right" role="menu">
                                        <li><a href="register.html">Encounter/Medication/Condition</a>
                                        </li>
                                        <!-- <li><a href="contact.html">Send Email to Provider</a>
                                        </li>
                                        <li><a href="observation.html">Enter your observations</a>
                                        </li>
                                        <li class="divider"></li>
                                        <li><a href="observation.html">enter you daily diet</a>
                                        </li> -->
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <!-- /.panel-heading -->
                        <div class="panel-body">
                            <div id="morris-line-chart"></div>
                        </div>
                        <!-- /.panel-body -->
                    </div></div>
                <!-- /.col-lg-8 -->
                <div class="col-lg-4">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <i class="fa fa-bell fa-fw"></i> Notifications Panel
                        </div>
                        <!-- /.panel-heading -->
                        <div class="panel-body">
                            <div class="list-group">
                                <a href="#" class="list-group-item">
                                    <i class="fa fa-comment fa-fw"></i> New Comment
                                    <span class="pull-right text-muted small"><em>4 minutes ago</em>
                                    </span>
                                </a>
                                <a href="#" class="list-group-item">
                                    <i class="fa fa-twitter fa-fw"></i> 3 New test result
                                    <span class="pull-right text-muted small"><em>12 minutes ago</em>
                                    </span>
                                </a>
                                <a href="#" class="list-group-item">
                                    <i class="fa fa-envelope fa-fw"></i> Message to provider
                                    <span class="pull-right text-muted small"><em>27 minutes ago</em>
                                    </span>
                                </a>
                                <a href="#" class="list-group-item">
                                    <i class="fa fa-tasks fa-fw"></i> Prescritpion Ready to pickup
                                    <span class="pull-right text-muted small"><em>43 minutes ago</em>
                                    </span>
                                </a>
                                <a href="#" class="list-group-item">
                                    <i class="fa fa-upload fa-fw"></i> Reminder, Enter you blood pressure
                                    <span class="pull-right text-muted small"><em>11:32 AM</em>
                                    </span>
                                </a>
                                <a href="#" class="list-group-item">
                                    <i class="fa fa-bolt fa-fw"></i> Start exerciz...
                                    <span class="pull-right text-muted small"><em>11:13 AM</em>
                                    </span>
                                </a>
                                <a href="#" class="list-group-item">
                                    <i class="fa fa-warning fa-fw"></i> Insurence Term & policy
                                    <span class="pull-right text-muted small"><em>10:57 AM</em>
                                    </span>
                                </a>
                                <a href="#" class="list-group-item">
                                    <i class="fa fa-shopping-cart fa-fw"></i> Dr. Jonson viewed your record
                                    <span class="pull-right text-muted small"><em>9:49 AM</em>
                                    </span>
                                </a>
                            </div>
                            <!-- /.list-group -->
                            <a href="#" class="btn btn-default btn-block">View All Alerts</a>
                        </div>
                        <!-- /.panel-body -->
                    </div>
                    </div>
                    <!-- /.panel .chat-panel -->
                </div>
                <!-- /.col-lg-4 -->
            <!-- /.row -->
        <!-- lower section -->
            <hr>
            <div class="row">
                <div class="col-md-4">
                    <!-- doctors -->
                    <h2>Doctors</h2>
                    <p>View all of your health care providers</p>
                    <form class="form-inline">
                        <div class="form-group">
                            <input type="text" class="form-control" id="patientID" placeholder="Patient ID">
                        </div><br/><br/>
                        <button type="button" class="btn btn-primary" id="patientDoctorViewBtn">View all of your provders</button>
                    </form><br/>
                    <!-- end doctors -->
                </div>
                <div class="col-md-4">
                    <!-- appointments -->
                    <h2>Appointments</h2>
                    <p>Schedule an appointment</p>
                    <form class="form-inline">
                        <div class="form-group">
                            <input type="text" class="form-control" id="providerIDSchedule" placeholder="Provider ID">
                        </div> <br/><br/>
                        <div class="form-group">
                            <input type="text" class="form-control" id="patientIDSchedule" placeholder="Patient ID">
                        </div> <br/><br/>
                        <div class="form-group">
                            <input type="text" class="form-control" id="scheduleNotes" placeholder="Notes">
                        </div> <br/><br/>
                        <div class="form-group">
                            <input type="datetime-local" class="form-control" id="appointDate" placeholder="Date/Time">
                        </div><br/><br/>
                        <button type="button" class="btn btn-primary" id="scheduleBtn">Schedule Appointment</button>
                    </form>
                    <p id="appointScheduled"></p>
                    <br/>
                    <p>View all scheduled appointments</p>
                    <form class="form-inline">
                        <div class="form-group">
                            <input type="text" class="form-control" id="viewProviderID" placeholder="Provider ID">
                        </div><br/><br/>
                        <div class="form-group">
                            <input type="text" class="form-control" id="viewPatientID" placeholder="Patient ID">
                        </div><br/><br/>
                        <button type="button" class="btn btn-primary" id="viewAppointBtn">View Appointments</button>
                    </form>
                </div>
                <!-- end appointments -->
                <div class="col-md-4">
                    <!-- feedback -->
                    <h2>Feedback</h2>
                    <p>See all feedback for a provider</p>
                    <form class="form-inline">
                        <div class="form-group">
                            <input type="text" class="form-control" id="providerIDFeedback" placeholder="Provider ID">
                        </div><br/><br/>
                        <button type="button" class="btn btn-primary" id="seeFeedbackBtn">View Feedback</button>
                        <p id="feedbackReturn"></p>
                    </form><br/>
                    <p>Provide feedback to your doctor</p>
                    <form class="form-inline">
                        <div class="form-group">
                            <input type="text" class="form-control" id="doctorIDFeedback" placeholder="Provider ID">
                        </div><br/><br/>
                        <div class="form-group">
                            <input type="text" class="form-control" id="patientIDFeedback" placeholder="Patient ID">
                        </div><br/><br/>
                        <div class="form-group">
                            <textarea rows="4" class="form-control" id="feedback" placeholder="Feedback"></textarea>
                        </div><br/><br/>
                        <button type="button" class="btn btn-primary" id="provideFeedbackBtn">Submit Feedback</button>
                        <p id="provFeedbackReturn"></p>
                    </form>
                    <!-- end feedback -->
                </div>
            </div>
            <br /><hr>
            <!-- tables -->
            <!-- patient fedback table -->
            <div id="patientFeedback">
                <h2>All Patient Feedback<span id="feedbackHeader"></span></h2>
                <div class="container" id="Pfeedback">
                    <table class="table table-striped" id="patientFeedbackTbl">
                        <thead>
                        <tr>
                            <th>Date</th>
                            <th>Feedback</th>
                        </tr>
                        </thead>
                        <tbody> </tbody>
                    </table>
                </div>
            </div>
            <!-- end feedback table -->
            <!-- All providers table -->
            <div id="allProviders">
                <h2>All Providers <span id="providersHeader"></span></h2>
                <div class="container" id="Aproviders">
                    <table class="table table-striped" id="allProvidersForPatientTbl">
                        <thead>
                        <tr>
                            <th>Provider ID</th>
                            <th>Provider Type</th>
                            <th>Last Name</th>
                            <th>First Name</th>
                            <th>Specialization</th>
                            <th>Affiliation</th>
                            <th>Address</th>
                            <th>Phone</th>
                            <th>Email</th>
                        </tr>
                        </thead>
                        <tbody></tbody>
                    </table><a id="providersFocus"></a>
                </div>
            </div>
            <!-- end all providers table -->
            <!-- appointment table -->
            <div id="appoint">
                <h2>Appointments</h2>
                <div class="container" id="appointments">
                    <table class="table table-striped" id="allAppointmentsTbl">
                        <thead>
                        <tr>
                            <td>Date</td>
                            <td>Title</td>
                            <td>Last Name</td>
                            <td>Specialization</td>
                            <td>Address</td>
                            <td>Phone</td>
                        </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
            <!-- end appiontment table -->
    </div> <!-- /#page-wrapper -->
    <div>
    <script type="text/ng-template" id="myModalContent.html">
        <div class="modal-header">
            <h3 class="modal-title">Send Email</h3>
        </div>
        <div class="modal-body form-group has-success">
            <ul>
                
                <!-- <li ng-repeat="item in items"> -->
                <li>    <p> first name : <br><input type="text" name="fname" required> </p></li>
                <li>    <p> Last name  : <br><input type="text" name="lname"  required>  </p></li>
                <li>    <p> Provider's Email : <br><input type="email" name="eMail" required></p></li>
                <li>    <p> Text : <br><textarea rows="4" cols="50"> </textarea></li>
                    <!-- <a href="#" ng-click="$event.preventDefault(); selected.item = item">{{ item }}</a> -->
                </li>
            </ul>
            Selected: <b>{{ selected.item }}</b>
        </div>
        <div class="modal-footer">
            
            <button class="btn btn-primary" type="button" ng-click="ok()">Send Email</button>
            <button class="btn btn-warning" type="button" ng-click="cancel()">Cancel</button>
        </div>
    </script>

    <!-- <button type="button" class="btn btn-default" ng-click="open()">Open me!</button> -->

    <!-- <button type="button" class="btn btn-default" ng-click="open('lg')">Large modal</button> ######-->

    <!-- <button type="button" class="btn btn-default" ng-click="open('sm')">Small modal</button> -->
    <!-- <button type="button" class="btn btn-default" ng-click="toggleAnimation()">Toggle Animation ({{ animationsEnabled }})</ button>-->
    <!-- <div ng-show="selected">Selection from a modal: {{ selected }}</div> -->
    </div>

    <!-- jQuery -->
    <script src="../bower_components/jquery/dist/jquery.min.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="../bower_components/bootstrap/dist/js/bootstrap.min.js"></script>

    <!-- Metis Menu Plugin JavaScript -->
    <script src="../bower_components/metisMenu/dist/metisMenu.min.js"></script>

    <!-- Morris Charts JavaScript -->
    <script src="../bower_components/raphael/raphael-min.js"></script>
    <script src="../bower_components/morrisjs/morris.min.js"></script>
    <script src="../js/morris-data.js"></script>

    <!-- Custom Theme JavaScript -->
    <script src="../dist/js/sb-admin-2.js"></script>
    <script>
        $(document).ready(function() {

            // hide the empty table headers when page loads
            $('#patientFeedback').hide();
            $('#allProviders').hide();
            $('#appoint').hide();

            // show all providers a patient has
            $('#patientDoctorViewBtn').click(function(){
                // hide tables
                $('#patientFeedback').hide();
                $('#allProviders').hide();
                $('#appoint').hide();
                // clear patients name from header
                $('#providersHeader').empty();
                // get the patient ID entered and add it to the provider header
                var patient = document.getElementById('patientID').value;
                document.getElementById('providersHeader').innerHTML = ('for Patient ' + patient);
                // make an ajax call to
                $.ajax({
                    type: "GET",
                    url: "http://ehr-namitgupta.rhcloud.com/webresources/GetAllProvidersForPatient",
                    headers: {
                        PatientID: patient
                    },
                    datatype: "json",
                    success: function(data){
                        // remove any exsisting rows in tables
                        $('#allProvidersForPatientTbl TBODY tr').remove();
                        // go through the providers and get data for table
                        var doc = [];
                        var phonePost = [];
                        var phonePre = [];
                        var x = 0;
                        for (var i = 0; i < data.length; i++) {
                            // randomly select num for provider
                            var ranNum = Math.floor((Math.random() * 200) + 1);
                            var ranNum1 = Math.floor((Math.random() * 900) + 100);
                            var ranNum2 = Math.floor((Math.random() * 9000) + 1000);
                            doc[i] = ranNum;
                            phonePre[i] = ranNum1;
                            phonePost[i] = ranNum2;
                            $.ajax({
                                type: "GET",
                                url: "http://ehr-namitgupta.rhcloud.com/webresources/GetProviderProfile",
                                headers: {
                                    UserName: ranNum,
                                    Password: ranNum
                                },
                                datatype: "json",
                                success: function (data) {
                                    //write data to table
                                    $('#allProvidersForPatientTbl TBODY').append('<tr><td>' + doc[x]
                                            + '</td><td>' + data.m_szProviderType
                                            + '</td><td>' + data.m_szLastName
                                            + '</td><td>' + data.m_szFirstName
                                            + '</td><td>' + data.m_szSpecialization
                                            + '</td><td>' + data.m_szAffiliation
                                            + '</td><td>' + data.m_szAddress
                                            + '</td><td>' + '(261) ' + phonePre[x] + '-' + phonePost[x]
                                            + '</td><td>' + data.m_szEmail + '</td></tr>');
                                    x+=1;
                                },
                                error: function (xhr) {
                                    console.log(xhr.responseText);
                                }
                            }); //end ajax
                        }
                    },
                    error: function(xhr){
                        // output error text to console
                        console.log(xhr.responseText);
                    }
                }); //end ajax
                $('#allProviders').show();
                document.getElementById('patientID').value = '';
                // set focus to table
                $('html,body').animate({
                    scrollTop: $('#allProviders').offset().top},
                        'slow');
            }); //end PatientDoctorViewBtn


            // schedule appointment
            $('#scheduleBtn').click(function(){
                // hide tables
                $('#patientFeedback').hide();
                $('#allProviders').hide();
                $('#appoint').hide();
                // get entered info
                var provider = document.getElementById('providerIDSchedule').value;
                var patient = document.getElementById('patientIDSchedule').value;
                var scheduleDate = document.getElementById('appointDate').value;
                var notes = document.getElementById('scheduleNotes').value;
                $.ajax({
                    type: "POST",
                    url: "http://ehr-namitgupta.rhcloud.com/webresources/AddAppointment",
                    headers: {
                        PatientID: patient,
                        ProviderID: provider,
                        DateTime: scheduleDate,
                        Notes: notes
                    },
                    datatype: "json",
                    success: function(data){
                        //format the date for display
                        var time = scheduleDate.split("T");
                        var year = time[0].split("-");
                        var hours = time[1].split(":");
                        displayTime = year[1] + '/' + year[2] + '/' + year[0] + ' at ' + hours[0] + ':' + hours[1];
                        // display the returned value - success or failure
                        if (data['success']){
                            $('#appointScheduled').text(data['success'] + " for " + displayTime);
                        } else {
                            $('#appointScheduled').text(data['error']);
                        }
                    },
                    error: function(xhr){
                        // output error text to console
                        console.log(xhr.responseText);
                    }
                });
                // clear textboxes
                document.getElementById('providerIDSchedule').value = '';
                document.getElementById('patientIDSchedule').value = '';
                document.getElementById('appointDate').value = '';
                document.getElementById('scheduleNotes').value = '';
            }); //end schedule Appointment


            // View appointments
            $('#viewAppointBtn').click(function(){
                // hide tables
                $('#patientFeedback').hide();
                $('#allProviders').hide();
                $('#appoint').hide();
                // get IDs
                var provider = document.getElementById('viewProviderID').value;
                var patient = document.getElementById('viewPatientID').value;
                $.ajax({
                    type: "GET",
                    url: "http://ehr-namitgupta.rhcloud.com/webresources/GetAppointment",
                    headers: {
                        PatientID: patient,
                        ProviderID: provider
                    },
                    datatype: "json",
                    success: function(data) {
                        // clear all rows from appointments table
                        $('#allAppointmentsTbl TBODY tr').remove();
                        // parse date to readable format
                        var dates = [];
                        for (var i = 0; i < data.length; i++) {
                            if(data[i]['m_szTimeStamp']){
                                var splitDate = data[i]['m_szTimeStamp'].split("T");
                                var year = splitDate[0].split('-');
                                var hour = splitDate[1].split(':');
                                dates[i] = year[1] + '/' + year[2] + '/' + year[0] + ' ' + hour[0] + ':' + hour[1];
                            } else {
                                dates[i] = '06/23/2016 2:30';
                            }
                        }
                        var x=0;
                        var phonePost = [];
                        var phonePre = [];
                        for (var j = 0; j < data.length; j++){
                            // randomly select num for provider and phone
                            var ranNum = Math.floor((Math.random() * 200) + 1);
                            var ranNum1 = Math.floor((Math.random() * 900) + 100);
                            var ranNum2 = Math.floor((Math.random() * 9000) + 1000);
                            phonePre[j] = ranNum1;
                            phonePost[j] = ranNum2;
                            $.ajax({
                                type: "GET",
                                url: "http://ehr-namitgupta.rhcloud.com/webresources/GetProviderProfile",
                                headers: {
                                    UserName: ranNum,
                                    Password: ranNum
                                },
                                datatype: "json",
                                success: function (data) {
                                    $('#allAppointmentsTbl TBODY').append('<tr><td>' + dates[x]
                                            + '</td><td>' + "Dr."
                                            + '</td><td>' + data.m_szLastName
                                            + '</td><td>' + data.m_szSpecialization
                                            + '</td><td>' + data.m_szAddress
                                            + '</td><td>' + '(261) ' + phonePre[x] + '-' + phonePost[x] + '</td></tr>');
                                    x+=1;
                                },
                                error: function (xhr) {
                                    console.log(xhr.responseText);
                                }
                            }); //end ajax
                        }
                        $('#appoint').show();
                    },
                    error: function (xhr){
                        console.log(xhr.responseText);
                    }
                }); // end ajax
                // clear fields
                document.getElementById('viewProviderID').value = '';
                document.getElementById('viewPatientID').value = '';
                // set focus to table
                $('html,body').animate({
                            scrollTop: $('#appoint').offset().top},
                        'slow');
            }); //end view appointments


            // see all feedback for a provider
            $('#seeFeedbackBtn').click(function(){
                // hide any tables that are showing and previous response
                $('#patientFeedback').hide();
                $('#allProviders').hide();
                $('#appoint').hide();
                $('#feedbackReturn').text('');
                // clear the provider name from the header
                $('#feedbackHeader').empty();
                //get the providerID entered and add it to the header
                var provider = document.getElementById('providerIDFeedback').value;
                document.getElementById('feedbackHeader').innerHTML += ('&nbspfor Provider ' + provider);
                // make an ajax call to ViewAllFeedbackForProvider
                $.ajax({
                    type: "GET",
                    url: "http://ehr-namitgupta.rhcloud.com/webresources/ViewAllFeedbackForProvider",
                    headers: {
                        ProviderID: provider
                    },
                    datatype: 'json',
                    success: function (data) {
                        // remove the rows from the feedback table
                        $('#patientFeedbackTbl TBODY tr').remove();
                        // if the response is error display the error else populate feedback table
                        if (data['error']){
                            $('#feedbackReturn').text(data['error']);
                            // if the table is showing hide it
                            $('#patientFeedback').hide();
                        } else {
                            $('#feedbackReturn').text('');
                            for (var i = 0; i < data.length; i++) {
                                var splitTime = data[i]['m_szTimeStamp'].split(".");
                                var time = splitTime[1] + '/' + splitTime[2] + '/' + splitTime[0] + ' ' + splitTime[3] + ':' + splitTime[4];
                                $('#patientFeedbackTbl TBODY').append('<tr><td>' + time
                                        + '</td><td>' + data[i].m_szFeedback + '</td></tr>');
                            }
                            // display the feedback table
                            $('#patientFeedback').show();
                        }
                    },
                    error: function (xhr) {
                        // output error text to console
                        console.log(xhr.responseType);
                    }
                }); //end ajax
                // clear the providerID textbox
                document.getElementById('providerIDFeedback').value = '';
                // set focus to table
                $('html,body').animate({
                            scrollTop: $('#patientFeedback').offset().top},
                        'slow');
            }); //end see all feedback


            // provide feedback to your doctor
            $('#provideFeedbackBtn').click(function () {
                // hide the table and any previous response
                $('#appoint').hide();
                $('#allProviders').hide();
                $('#patientFeedback').hide();
                $('#provFeedbackReturn').text('');
                // get the values entered by the patient
                var provider = document.getElementById('doctorIDFeedback').value;
                var patient = document.getElementById('patientIDFeedback').value;
                var userFeedback = document.getElementById('feedback').value;
                // make an ajax call to AddFeedbackForProvider
                $.ajax({
                    type: "POST",
                    url: "http://ehr-namitgupta.rhcloud.com/webresources/AddFeedbackForProvider",
                    headers: {
                        PatientID: patient,
                        ProviderID: provider,
                        Feedback: userFeedback
                    },
                    //data: {
                    //  feedback: userFeedback
                    //},
                    datatype: "json",
                    success: function(data){
                        // display success or failure message
                        if (data['success']){
                            $('#provFeedbackReturn').text(data['success']);
                        } else {
                            $('#provFeedbackReturn').text(data['error']);
                        }
                    },
                    error: function(xhr){
                        // output error text to console
                        console.log(xhr.responseText);
                    }
                }); //end ajax
                document.getElementById('doctorIDFeedback').value = '';
                document.getElementById('patientIDFeedback').value = '';
                document.getElementById('feedback').value = '';
            }); //end provide feedback

        });  // end ready function

    </script>
</body>
</html>
